<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>How to set up React, webpack 4, and Babel 7</title><link rel="stylesheet" href="/css/layout.css">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css"><link rel="shortcut icon" href="/img/favicon.ico"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">简单易懂の现代魔法</a></li><li class="menu-item"><a href="/archives/" class="menu-link">Archives</a></li><li class="menu-item"><a href="http://weibo.com/u/2360401155" class="menu-link">Weibo</a></li><li class="menu-item"><a href="/about" class="menu-link">About</a></li><li class="menu-item"><a href="/atom.xml" class="menu-link">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">简单易懂の现代魔法</a></li><li class="menu-item"><a href="/archives/" class="menu-link">Archives</a></li><li class="menu-item"><a href="http://weibo.com/u/2360401155" class="menu-link">Weibo</a></li><li class="menu-item"><a href="/about" class="menu-link">About</a></li><li class="menu-item"><a href="/atom.xml" class="menu-link">Rss</a></li></ul></nav><div id="mobile-menu-toggle" class="toggle-menu"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">How to set up React, webpack 4, and Babel 7</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2018-11-19</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a href="/tags/react/" class="tag-link">react</a></p></div><div class="article-content"><p><strong>React</strong> 主要用于单页面应用程序。</p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><p>Y然而，你可以将React库集成到任何使用 <strong>webpack</strong>和<strong>Babel</strong>构建的网站中。</p>
<p><img src="/img/react/webpack4-react-babel.png" alt="react webpack babel"></p>
<a id="more"></a>
<h2><span id="how-to-set-up-react-webpack-and-babel-what-you-will-learn">How to set up React, Webpack, and Babel: What you will learn</span></h2>
<ol>
<li>如何安装和配置webpack</li>
<li>如何安装和配置Babel</li>
<li>如何安装React</li>
<li>如何按照<code>Container / Presentational</code>组件的原则创建两个React组件</li>
<li>如何将生成的包包含到HTML页面</li>
<li>如何安装和配置Webpack Dev Server</li>
</ol>
<p>React不仅限于SPA应用。可以将库集成到任何现有网站中。</p>
<p>可以通过CDN或模块包引入React。</p>
<p>对于我的大多数项目，我都使用Webpack：将React和Webpack结合起来很容易。</p>
<p>您也可以按下下面几分钟的教程与Webpack4工作。</p>
<h2><span id="how-to-set-up-react-webpack-and-babel-setting-up-the-project">How to set up React, Webpack, and Babel: Setting up the project</span></h2>
<p>首先为项目创建一个目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir webpack-react-tutorial &amp;&amp; cd webpack-react-tutorial</span><br></pre></td></tr></table></figure>
<p>创建一个用于保存代码的最小目录结构：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p src</span><br></pre></td></tr></table></figure>
<p>通过运行来启动项目：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>就是这么简单，项目建立完成！</p>
<h2><span id="how-to-set-up-react-webpack-and-babel-setting-up-webpack">How to set up React, Webpack, and Babel: Setting up webpack</span></h2>
<p><strong>Webpack</strong> 是现代Web开发的支柱之一。这是一个非常强大的工具。</p>
<p>了解如何使用webpack是使用React的基础。</p>
<p>webpack提取原始的React组件，用于生成(几乎)每个浏览器都能运行的JavaScript代码。</p>
<p>让我们通过运行以下命令来安装它：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack --save-dev</span><br></pre></td></tr></table></figure>
<p>你还需要webpack-cli，将其加入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-cli --save-dev</span><br></pre></td></tr></table></figure>
<p>接下来将<code>webpack</code>命令加入到<code>package.json</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">	"build": "webpack --mode production"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里，不需要为webpack定义配置文件。</p>
<p>较旧的webpack版本会自动查找配置文件。</p>
<p>自版本4开始，你可以直接开发。</p>
<p>下一小节，我们将安装和配置Babel以便转换我们的代码。</p>
<h2><span id="how-to-set-up-react-webpack-and-babel-setting-up-babel">How to set up React, Webpack, and Babel: Setting up Babel</span></h2>
<p>React components(组件)大多是用JavaScript ES6编写的。</p>
<p>由于浏览器无法理解React组件，因此需要进行某种转换。</p>
<p>Webpack不知道如何进行转换，但它具有loaders(加载器)的概念：将它们视为转换器。</p>
<p>Webpack loaders(加载器)将某些内容作为输入并生成其他内容作为输出。</p>
<p>babel-loader是Webpack加载器，负责接收ES6代码并使其可以让所选择的浏览器理解。</p>
<p>很明显 babel-load使用Babel。并且Babel必须配置为使用一组预设：</p>
<p>babel-preset-env用于将JavaScript ES6代码编译为ES5(请注意，babel-preset-es2015现已弃用)</p>
<p>babel-preset-react用于将JSX和其它东西编译到JavaScript</p>
<p>让我们用以下命令引入依赖关系：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-loader babel-core babel-preset-env babel-preset-react --save-dev</span><br></pre></td></tr></table></figure>
<p>别忘了配置Babel！在项目文件夹中创建一个名为<code>.babelrc</code>的新文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [&quot;env&quot;, &quot;react&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时我们已准备好定义最小的webpack配置。</p>
<p>创建一个名为<code>webpack.config.js</code>的文件，写入以下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">	  &#123;</span><br><span class="line">	    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">		exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">		use: &#123;</span><br><span class="line">		  loader: <span class="string">"babel-loader"</span></span><br><span class="line">		&#125;</span><br><span class="line">      &#125;</span><br><span class="line">	]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>配置非常简单。</p>
<p>对于每个扩展名为<code>.js</code>的文件，webpack都会通过babel-loader来管理代码，将ES6转换为ES5.</p>
<p>有了这个，我们就可以编写我们的React组件了。</p>
<p>让我们来看看下一节。</p>
<h2><span id="how-to-set-up-react-webpack-and-babel-writing-react-components">How to set up React, webpack, and Babel: writing React components</span></h2>
<p>我喜欢按照容器(Container)组件/展示(Presentational)组件的原则编写我的React组件。</p>
<p>我建议看看Dan Abramov的 <a href="https://medium.com/@learnreact/container-components-c0e67432e005" target="_blank" rel="noopener">container components</a> 和 <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" target="_blank" rel="noopener">smart and dumb components</a>，以了解更多信息。</p>
<p>简而言之，容器组件/展示组件原则是React组件的模式。</p>
<p>容器组件是承载所有逻辑的容器组件：用于处理state(状态)更改，内部组件state(状态)等的功能。</p>
<p>相反，展示组件仅用于显示所需的HTML标记。展示组件通常是普通的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener">箭头函数</a>，并从容器组件接受数据作为 <a href="https://reactjs.org/docs/components-and-props.html" target="_blank" rel="noopener">props(属性)</a>。</p>
<p>你将在以下示例中看到它们的样子。</p>
<p>对于这片文章的范围，我想构建一个带有单个文本输入的超级简单的React表单。</p>
<p>在接触任何代码之前，让我们通过运行以下命令来引入React：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i react react-dom --save-dev</span><br></pre></td></tr></table></figure>
<p>然后创建一个用于组织组件的最小目录结构：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p src/js/components/&#123;container,presentational&#125;</span><br></pre></td></tr></table></figure>
<p>接下来让我们创建一个容器组件：</p>
<ul>
<li>有自己的state(状态)</li>
<li>渲染HTML表单</li>
</ul>
<p>在<code>src/js/components/container/</code>中创建组件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch src/js/components/container/ForContainer.js</span><br></pre></td></tr></table></figure>
<p>该组件将如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      title: <span class="string">""</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;form id=<span class="string">"article-form"</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default FormContainer;</span></span><br></pre></td></tr></table></figure>
<p>该组件刺客没什么内容和交互。它只是一个包装组件的骨架。</p>
<p>事实上，如果一个容器组件不包含展示子组件的话，那么这个容器组件几乎是无用的。</p>
<p>我们来解决这个问题。</p>
<p>在<code>src/js/components/presentational/</code>中创建一个新组件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch src/js/components/presentational/Input.js</span><br></pre></td></tr></table></figure>
<p>我们的第一个表示性的React组件将是文本输入框。我们知道HTML input具有以下属性：</p>
<ul>
<li>type</li>
<li>class</li>
<li>id</li>
<li>value</li>
<li>required</li>
</ul>
<p>所有这些都将成为容器组件传递给其展示子组件的props(属性)。</p>
<p>由于Input保持自己的state(状态)，我们必须确保React会处理它。HTML input成为一个React中的受控组件。</p>
<p>说到props(属性)，最好使用Prop Types记录你的React组件。</p>
<p>通过运行以下命令来安装prop-types包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i prop-types --save-dev</span><br></pre></td></tr></table></figure>
<p>回到React，HTML Input展示组件如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">"prop-types"</span>;</span><br><span class="line"><span class="keyword">const</span> Input = <span class="function">(<span class="params">&#123; label, text, type, id, value, handleChange &#125;</span>) =&gt;</span> (</span><br><span class="line">  &lt;div className=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;label htmlFor=&#123;label&#125;&gt;&#123;text&#125;&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">    &lt;input</span></span><br><span class="line"><span class="regexp">      type=&#123;type&#125;</span></span><br><span class="line"><span class="regexp">      className="form-control"</span></span><br><span class="line"><span class="regexp">      id=&#123;id&#125;</span></span><br><span class="line"><span class="regexp">      value=&#123;value&#125;</span></span><br><span class="line"><span class="regexp">      onChange=&#123;handleChange&#125;</span></span><br><span class="line"><span class="regexp">      required</span></span><br><span class="line"><span class="regexp">    /</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp">Input.propTypes = &#123;</span></span><br><span class="line"><span class="regexp">  label: PropTypes.string.isRequired,</span></span><br><span class="line"><span class="regexp">  text: PropTypes.string.isRequired,</span></span><br><span class="line"><span class="regexp">  type: PropTypes.string.isRequired,</span></span><br><span class="line"><span class="regexp">  id: PropTypes.string.isRequired,</span></span><br><span class="line"><span class="regexp">  value: PropTypes.string.isRequired,</span></span><br><span class="line"><span class="regexp">  handleChange: PropTypes.func.isRequired</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">export default Input;</span></span><br></pre></td></tr></table></figure>
<p>此时，我们就可以更新容器组件，以包含文本输入框，即 Input 展示组件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> Input <span class="keyword">from</span> <span class="string">"../presentational/Input"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      seo_title: <span class="string">""</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.handleChange = <span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  handleChange(event) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; [event.target.id]: event.target.value &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; seo_title &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;form id=<span class="string">"article-form"</span>&gt;</span><br><span class="line">        &lt;Input</span><br><span class="line">          text=<span class="string">"SEO title"</span></span><br><span class="line">          label=<span class="string">"seo_title"</span></span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          id=<span class="string">"seo_title"</span></span><br><span class="line">          value=&#123;seo_title&#125;</span><br><span class="line">          handleChange=&#123;<span class="keyword">this</span>.handleChange&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default FormContainer;</span></span><br></pre></td></tr></table></figure>
<p>是时候把所有这些东西联系起来了。</p>
<p>Webpack期望 entry point(入口点)为 <code>./src/index.js</code></p>
<p>创建 <code>./src/index.js</code>，并使用<code>import</code>指令将容器组件引入其中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> FormContainer <span class="keyword">from</span> <span class="string">"./js/components/container/FormContainer"</span>;</span><br></pre></td></tr></table></figure>
<p>有了这个，我们就可以通过运行以下命令来创建我们的包了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>给Webpack一秒钟，看看bundle(包)就生产了！</p>
<p>bundle(包)将被放入 <code>./dist/main.js</code>。</p>
<p>现在让我们通过将bundle(包)包含在HTML页面中来实现我们的React实战。</p>
<p>如何使用webpack 4和 Babel 构建 React 应用：HTML webpack插件 (html-webpack-plugin，html-loader)</p>
<p>要显示我们的 React 表单，我们必须告诉 webpack生产一个HTML页面。生产的 bundle(包)将放在 <code>&lt;script&gt;&lt;/script&gt;</code>标签内。</p>
<p>webpack需要两个额外的组件来处理HTML： html-webpack-plugin 和 html-loader。</p>
<p>通过以下命令添加依赖项：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin html-loader --save-dev</span><br></pre></td></tr></table></figure>
<p>然后更新webpack配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebPackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">"babel-loader"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">"html-loader"</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebPackPlugin(&#123;</span><br><span class="line">      template: <span class="string">"./src/index.html"</span>,</span><br><span class="line">      filename: <span class="string">"./index.html"</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>接下来<code>./src/index.html</code>中创建一个HTML文件(可以随意使用你喜欢的CSS库)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>How to set up React, Webpack, and Babel<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row mt-5"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 offset-md-1"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>Create a new article<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"create-article-form"</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- form --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>还剩下最后一件事！我们必须告诉我们React组件将自己渲染到 <code>&lt;div id=&quot;create-article-form&quot;&gt;&lt;/div&gt;</code>标签中。</p>
<p>打开<code>./src/js/components/container/FormContainer.js</code>并在文件底板添加以下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wrapper = <span class="built_in">document</span>.getElementById(<span class="string">"create-article-form"</span>);</span><br><span class="line">wrapper ? ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">FormContainer</span> /&gt;</span>, wrapper) : false;</span></span><br></pre></td></tr></table></figure>
<p>关闭并保存文件。</p>
<p>现在再次运行构建：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>并查看 <code>./dist</code> 文件夹。 你应该看到生成的HTML。</p>
<p>使用webpack，无需在HTML文件中包含你的JavaScript：bundle(包)将自动注入页面。</p>
<p>在浏览器中打开<code>./dist/index.html</code>：你应该可以看到React表单了。</p>
<h2><span id="how-to-set-up-react-webpack-and-babel-webpack-dev-server">How to set up React, webpack, and Babel: webpack dev server</span></h2>
<p>每次更改文件时，你应该不希望每次都需要键入 <code>npm run build</code>来重新构建项目。</p>
<p>只需3行配置即可启动并运行开发服务器。</p>
<p>配置后，webpack将在浏览器中启动你的应用程序。</p>
<p>此外，每次在修改后保存文件时，webpack dev server都会自动刷新浏览器的窗口。</p>
<p>要设置webpack dev server，请先通过以下命令安装包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure>
<p>打开 <code>package.json</code>添加启动脚本：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "webpack-dev-server --open --mode development",</span><br><span class="line">  "build": "webpack"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>保存并关闭文件。</p>
<p>现在执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>
<p>webpack dev server会为每个更新的文件自动刷新浏览器窗口。</p>
<p><img src="/img/react/react-webpack-babel-webpack-dev-server.png" alt="webpack dev server"></p>
<h2><span id="how-to-set-up-react-webpack-and-babel-wrapping-up">How to set up React, webpack, and Babel: wrapping up</span></h2>
<p>React主要用于创建单页面应用程序。但它也可以适用于任何网站。</p>
<p>通过组合webpack 和 Babel，可以将一堆 React组件转换为适合分发的 bundle(包).</p>
</div></article><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2018/11/19/react/react-webpack-babel/';
var disqus_title = 'How to set up React, webpack 4, and Babel 7';
var disqus_url = 'http://galudisu.info/2018/11/19/react/react-webpack-babel/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//barudisshu-github-io.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>©2016 - 2019 <a href="http://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready"><script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css"><script src="/js/base.js"></script><script src="/js/rabbit-lyrics.js"></script></div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body></html>