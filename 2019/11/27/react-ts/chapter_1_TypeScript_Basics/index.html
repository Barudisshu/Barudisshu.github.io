<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>第一章 基础</title><link rel="stylesheet" href="/css/layout.css">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css"><link rel="shortcut icon" href="/img/favicon.ico"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">简单易懂の现代魔法</a></li><li class="menu-item"><a href="/archives/" class="menu-link">Archives</a></li><li class="menu-item"><a href="http://weibo.com/u/2360401155" class="menu-link">Weibo</a></li><li class="menu-item"><a href="/about" class="menu-link">About</a></li><li class="menu-item"><a href="/atom.xml" class="menu-link">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">简单易懂の现代魔法</a></li><li class="menu-item"><a href="/archives/" class="menu-link">Archives</a></li><li class="menu-item"><a href="http://weibo.com/u/2360401155" class="menu-link">Weibo</a></li><li class="menu-item"><a href="/about" class="menu-link">About</a></li><li class="menu-item"><a href="/atom.xml" class="menu-link">Rss</a></li></ul></nav><div id="mobile-menu-toggle" class="toggle-menu"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">第一章 基础</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2019-11-27</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tags"> </i><a href="/tags/react/" class="tag-link">react<span class="tag">, </span></a><a href="/tags/typescript/" class="tag-link">typescript</a></p><p class="meta-item meta-category"><span class="meta-item-title"></span><i class="icon-bookmark"> </i><a href="/categories/react/" class="category-link">react</a></p></div><div class="article-content"><ul>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><li>TypeScript 的好处</li>
<li>基础类型</li>
<li>接口，类型alias，类</li>
<li>模块结构</li>
<li>配置</li>
<li>TypeScript lint</li>
<li>代码格式化</li>
</ul>
<h2><span id="技术前提">技术前提</span></h2>
<ul>
<li>
<p>TypeScript 背景： <a href="https://www.typescriptlang.org/play/" target="_blank" rel="noopener">https://www.typescriptlang.org/play/</a></p>
</li>
<li>
<p>Node.js 以及npm：Node &gt;= 8.2， npm &gt;= 5.2</p>
</li>
<li>
<p>TypeScript安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Visual Studio Code：前端开发利器</p>
</li>
</ul>
<h2><span id="typescript-带来了什么">TypeScript 带来了什么</span></h2>
<p>TypeScript解决了JavaScript代码增长带来难于阅读和难于维护的痛点。比起JavaScript，</p>
<ul>
<li>开发前期可以捕获代码错误</li>
<li>静态类型允许开发工具提升开发者的经验和生产力</li>
<li>兼容各种浏览器，以及一些非浏览器平台</li>
</ul>
<h2><span id="基础类型">基础类型</span></h2>
<h3><span id="原生类型">原生类型</span></h3>
<ul>
<li><code>string</code>: Unicode字符串</li>
<li><code>number</code>: 表达整数和浮点数</li>
<li><code>boolean</code>: 逻辑true或false</li>
<li><code>undefined</code>: 未定义值</li>
<li><code>null</code>: null</li>
</ul>
<h3><span id="类型标注">类型标注</span></h3>
<p>TypeScript在变量声明时带有类型，语法为<code>:Type</code>。</p>
<h3><span id="类型推断">类型推断</span></h3>
<p>TypeScript可以简单地有赋值推断出其类型，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<h4><span id="any">Any</span></h4>
<p>既没有值，也没有指定类型的变量，它的类型是<code>any</code>，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag;</span><br></pre></td></tr></table></figure>
<p>它用于动态声明，表示其值的类型会随后被确定。</p>
<h4><span id="void">Void</span></h4>
<p>用于函数的返回表示，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function logText(text: string): void &#123;</span><br><span class="line">	console.log(text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通常不带return语句体的函数，返回值类型会自动推断为<code>void</code>。</p>
<h4><span id="never">Never</span></h4>
<p>表示“从不”，用于指定该代码不可达</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function foreverTask(taskName: string): never &#123;</span><br><span class="line">	while(true) &#123;</span><br><span class="line">		console.log(`Doing $&#123;taskName&#125; over and over again ...`);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该函数一直循环，永不还回，所以需要给定类型<code>never</code>。</p>
<h4><span id="enumerations">Enumerations</span></h4>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> OrderStatus &#123;</span><br><span class="line">	Paid,</span><br><span class="line">	Shipped,</span><br><span class="line">	Completed,</span><br><span class="line">	Cancelled</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问通过下标方式，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let status = OrderStatus.Paid</span><br></pre></td></tr></table></figure>
<p>TypeScript的枚举，遵循自动下标的语法，即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum OrderStatus &#123;</span><br><span class="line">	Paid = 1,</span><br><span class="line">	Shipped,</span><br><span class="line">	Completed,</span><br><span class="line">	Cancelled</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不声明的部分按顺序逐个递增，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let status = OrderStatus.Shipped;</span><br><span class="line">console.log(status);		// print 2</span><br></pre></td></tr></table></figure>
<h4><span id="objects">Objects</span></h4>
<p>TS的object和JS是共享的，是一种非原生类型。例如，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const customer = &#123;</span><br><span class="line">	name: &quot;Lamps Ltd&quot;,</span><br><span class="line">	turnover: 2000134,</span><br><span class="line">	active: true</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>和JS一样，可以通过下标，直接修改和访问其值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customer.turnover = 123,</span><br></pre></td></tr></table></figure>
<p>不同的是，它有类型，所以下面会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customer.turnover = &quot;500,500&quot;,</span><br></pre></td></tr></table></figure>
<h4><span id="arrays">Arrays</span></h4>
<p>数组需要带类型，其它地方用法和JS差不多</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const numbers: number[] = [];</span><br><span class="line">number.push(1);</span><br></pre></td></tr></table></figure>
<p>另外可以通过类型推断来声明，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 3, 5];</span><br></pre></td></tr></table></figure>
<p>迭代方式有几种，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (let i in numbers) &#123;</span><br><span class="line">	console.log(numbers[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numbers.forEach(function (num)&#123;</span><br><span class="line">	console.log(num);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3><span id="创建接口类型别名类">创建接口，类型别名，类</span></h3>
<p>常量的定义，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const customer = &#123;</span><br><span class="line">	name: &quot;Lamps Ltd&quot;,</span><br><span class="line">	turnover: 2000134,</span><br><span class="line">	active: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是改为下面会出现编译错误，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let customer: Object;</span><br><span class="line">customer = &#123;</span><br><span class="line">	name: &quot;Lamps Ltd&quot;,</span><br><span class="line">	turnover: 2000134,</span><br><span class="line">	active: true</span><br><span class="line">&#125;;</span><br><span class="line">customer.turnover = 20002000;	// error</span><br></pre></td></tr></table></figure>
<p>Typescript 编译器不知道<code>customer</code>有哪些属性，所以需要引入结构化特性。</p>
<h3><span id="interfaces">Interfaces</span></h3>
<p>接口用<code>interface</code>关键字声明，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="properties">Properties</span></h3>
<p>properties就是结构的其中一个属性，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口的属性必须声明了才能访问，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const table: Product = &#123;</span><br><span class="line">	name: &quot;Table&quot;,</span><br><span class="line">	unitPrice: 500</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口也是类型，所以可以在其它接口引用，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const table: Product = &#123;</span><br><span class="line">	name: &quot;Table&quot;,</span><br><span class="line">	unitPrice: 500</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const tableOrder: OrderDetail = &#123;</span><br><span class="line">	product: table,</span><br><span class="line">	quantity: 1</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3><span id="方法签名">方法签名</span></h3>
<p>接口可以包含方法签名而没有具体实现，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	getTotal(idscount: number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体对象需要实现接口的方法签名，方法签名必须一致，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const tableOrder: OrderDetail = &#123;</span><br><span class="line">	product: table,</span><br><span class="line">	quantity: 1,</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">		const discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		return priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>接口中的方法签名，参数部分可以不用声明类型，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	....</span><br><span class="line">	getTotal(number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但省略的参数类型使得阅读难于理解，我们不知道具体参数是什么类型？</p>
<h3><span id="可选属性可选参数">可选属性，可选参数</span></h3>
<p>和大部分现代语言类似，TypeScript中使用<code>?</code>表示属性或参数是个optional 的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	dateAdded?: Date,</span><br><span class="line">	getTotal(discount: number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法签名的参数也可以是可选的，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	dateAdded?: Date,</span><br><span class="line">	getTotal(discount?: number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法签名的实现可以改为，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getTotal(discount?: number): number &#123;</span><br><span class="line">	const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">	const discountAmount = priceWithoutDiscount * (discount || 0);</span><br><span class="line">	return priceWithoutDiscount - discountAmount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此在方法调用时，可以不传参数，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tableOrder.getTotal();</span><br></pre></td></tr></table></figure>
<h3><span id="readonly-属性">Readonly 属性</span></h3>
<p><code>readonly</code>属性，顾名思义只能读取，不能修改，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	readonly name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，下面操作发生编译错误，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const table: Product = &#123;</span><br><span class="line">	name: &quot;Table&quot;;</span><br><span class="line">	unitPrice: 500</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">table.name = &quot;Better Table&quot;;</span><br></pre></td></tr></table></figure>
<h3><span id="接口继承">接口继承</span></h3>
<p>接口继承使用<code>extends</code>关键字，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface DiscountCode [</span><br><span class="line">	code: string;</span><br><span class="line">	percentage: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface ProductWithDiscountCodes extends Product &#123;</span><br><span class="line">	discountCodes: DiscountCode[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口的实例可以简单创建，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const table: ProductWithDiscountCodes = &#123;</span><br><span class="line">	name: &quot;Table&quot;,</span><br><span class="line">	unitPrice: 500,</span><br><span class="line">	discountCodes: [</span><br><span class="line">		&#123; code: &quot;SUMMER10&quot;, percentage: 0.1 &#125;,</span><br><span class="line">		&#123; code: &quot;BFRI&quot;, percentage: 0.2 &#125;</span><br><span class="line">	]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3><span id="类型别名">类型别名</span></h3>
<p>类型别名就是给指定类型标准一个新的类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type GetTotal = (discount: number) =&gt; number;</span><br><span class="line"></span><br><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	getTotal: GetTotal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类型别名和接口相似，不同的是类型别名不能有extends，也不能implemented。</p>
<h3><span id="类">类</span></h3>
<p>类比起接口有更多的特性，</p>
<h3><span id="基础类">基础类</span></h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class Product &#123;</span><br><span class="line">	name: stirng;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大部分概念和Java类型，可以通过<code>new</code>关键字声明实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const table = new Product();</span><br><span class="line">table.name = &quot;Table&quot;;</span><br><span class="line">table.unitPrice = 500;</span><br></pre></td></tr></table></figure>
<p>可以调用对应的成员方法，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">		const discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		return priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建对应实例，调用成员方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const table = new Product();</span><br><span class="line">table.name = &quot;Table&quot;;</span><br><span class="line">table.unitPrice = 500;</span><br><span class="line"></span><br><span class="line">const orderDtail = new OrderDetail();</span><br><span class="line">orderDetail.product = table;</span><br><span class="line">orderDetail.quantity = 2;</span><br><span class="line"></span><br><span class="line">const total = orderDetail.getTotal(0.1);</span><br><span class="line">console.log(total);</span><br></pre></td></tr></table></figure>
<h3><span id="接口继承">接口继承</span></h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface IOrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	getTotal(discount: number): number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class OrderDetail implements IOrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">		const discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		return priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="构造器">构造器</span></h3>
<p>TS中的构造函数概念和Java一样，形式不一样，TS中需要使用<code>constructor</code>私有成员，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class OrderDetail implements IOrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	</span><br><span class="line">	constructor(product: Product, quantity: number) &#123;</span><br><span class="line">		this.product = product;</span><br><span class="line">		this.quantity = quantity;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number = &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建实例时，会强制要求传递参数，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const orderDetail = new OrderDetail(table, 2);</span><br></pre></td></tr></table></figure>
<p>某些情况下，可以使用默认值，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">constructor(product: Product, quantity: number = 1) &#123;</span><br><span class="line">	this.product = product;</span><br><span class="line">	this.quantity = quantitty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>声明实例时可以不写，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const orderDetail = new OrderDetail(table);</span><br></pre></td></tr></table></figure>
<p>可以少写点代码，在构造参数前引入<code>public</code>关键字，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class OrderDetail implements IOrderDetail &#123;</span><br><span class="line">	constructor(public product: Product, public quantity: number = 1) &#123;</span><br><span class="line">		this.product = product;</span><br><span class="line">		this.quantity = quantity;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="类继承">类继承</span></h3>
<p>类之间可以继承，使用关键字<code>extends</code>，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface DiscountCode &#123;</span><br><span class="line">	code: string;</span><br><span class="line">	percentage: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ProductWithDiscountCodes etends Product &#123;</span><br><span class="line">	discountCodes: DiscountCode[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该类型实例的创建如下，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const table = new ProductWithDiscountCodes();</span><br><span class="line">table.name = &quot;Table&quot;;</span><br><span class="line">table.unitPrice = 500;</span><br><span class="line">table.discountCodes = [</span><br><span class="line">	&#123; code: &quot;SUMMER10&quot;, percentage: 0.1 &#125;,</span><br><span class="line">	&#123; code: &quot;BFRI&quot;, percentage: 0.2 &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>父类包含构造函数，子类也必须包含构造函数的实现，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Product &#123;</span><br><span class="line">	constructor(public: name: string; public unitPrice: number) &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface DiscountCode &#123;</span><br><span class="line">	code: string;</span><br><span class="line">	percentage: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ProductWithDiscountCodes extends Product &#123;</span><br><span class="line">	constructor(public name: string, public unitPrice: number) &#123;</span><br><span class="line">		super(name, unitPrice);</span><br><span class="line">	&#125;</span><br><span class="line">	discountCodes: DiscountCode[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="抽象类">抽象类</span></h3>
<p>抽象类使用<code>abstract</code>关键字声明，表示没有实例化能力的成员</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> Product &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">	uitPrice: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bread = <span class="keyword">new</span> Procut();		<span class="comment">// compile error</span></span><br></pre></td></tr></table></figure>
<p>抽象方法需要带有<code>abstract</code>关键字，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> Product &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">	uitPrice: <span class="built_in">number</span>;</span><br><span class="line">	<span class="keyword">abstract</span> <span class="keyword">delete</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所有子类都要实现这个抽象方法，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Fond <span class="keyword">extends</span> Product &#123;</span><br><span class="line">	deleted: <span class="built_in">boolean</span>;</span><br><span class="line">	<span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> bestBefore: <span class="built_in">Date</span></span>) &#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">delete</span>() &#123;</span><br><span class="line">		<span class="keyword">this</span>.deleted = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="访问修改器">访问修改器</span></h3>
<p>按照访问作用域划分，目前有以下几种，</p>
<ul>
<li><code>public</code>:</li>
<li><code>private</code>:</li>
<li><code>protected</code>:</li>
<li><default>:</default></li>
</ul>
<h3><span id="setter和getter">Setter和Getter</span></h3>
<p>和Java不同，TS中有关键字<code>get</code>和<code>set</code>，语法和方法类似，其中<code>get</code>不带参数；<code>set</code>但一个参数，一般用于私有方法的操作处理，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Product &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> _unitPrice: <span class="built_in">number</span>;</span><br><span class="line">	<span class="keyword">get</span> unitPrice(): <span class="built_in">number</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>._unitPrice || <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">set</span> unitPrice(value: <span class="built_in">number</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(value &lt; <span class="number">0</span>) &#123;</span><br><span class="line">			value = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>._unitPrice = value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> table = <span class="keyword">new</span> Product();</span><br><span class="line">table.name = <span class="string">"Table"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(table.unitPrice);</span><br><span class="line">table.unitPrice = <span class="number">-10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(table.unitPrice);</span><br></pre></td></tr></table></figure>
<h3><span id="static">Static</span></h3>
<p>静态声明的方法或属性，作用域类自身而不是类的对象实例。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: <span class="built_in">number</span>;</span><br><span class="line">	<span class="keyword">static</span> getTotal(discount: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> priceWithoutDiscount = <span class="keyword">this</span>.product.unitPrice * <span class="keyword">this</span>.quantity;	<span class="comment">// compile error</span></span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>静态作用域里面的访问成员要求也必须是静态的，因此不能在静态方法中使用<code>this.properties</code>进行访问</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> getTotal(unitPrice: <span class="built_in">number</span>, quantity: <span class="built_in">number</span>, discount: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> priceWithoutDiscount = unitPrice * quantity;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">return</span> ...;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> total = OrderDetail.getTotal(<span class="number">500</span>, <span class="number">2</span>, <span class="number">0.1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(total);</span><br></pre></td></tr></table></figure>
<h2><span id="结构化-转变-为模块">结构化 转变 为模块</span></h2>
<p>由于TypeScript是最终编译成为JavaScript，并且其作用域的是全局的。这样就带来一个问题是，同名的条目会在不同文件中造成冲突，因此需要实现模块化来解决这个问题，使得代码更容易组织，更高的重用性。</p>
<h3><span id="模块化格式">模块化格式</span></h3>
<p>模块化是属于ES6的JavaScript的部分特性。简要描述一下TypeScript的不同模块化格式：</p>
<ul>
<li><code>AMD(Asynchronous Module Definition)</code>: 最常见，对目标浏览器，用一个<code>define</code>函数来定义模块。</li>
<li><code>CommonJS</code>: 用于Node.js程式，使用<code>module.exports</code>来定义模块，用<code>require</code>来定义依赖。</li>
<li><code>UMD(Universal Module Definition)</code>: 可以用于浏览器app和Node.js程式。</li>
<li><code>ES6</code>: 使用<code>export</code>关键字来定义模块，<code>import</code>来定义依赖。</li>
</ul>
<p>笔者这里使用ES6。</p>
<h3><span id="exporting">Exporting</span></h3>
<p>从一个module进行export以允许在其它module中被使用。使用<code>export</code>关键字。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> Product &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">	unitPrice: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者重命名，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Product &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">	unitPrice: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; Product <span class="keyword">as</span> Stock &#125;</span><br></pre></td></tr></table></figure>
<h3><span id="importing">Importing</span></h3>
<p>有export就需要在其它模块进行import，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Product &#125; <span class="keyword">from</span> <span class="string">"./product"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: <span class="built_in">number</span>;</span><br><span class="line">	getTotal(discount: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者重命名，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Product <span class="keyword">as</span> Stock &#125; <span class="keyword">from</span> <span class="string">"./product"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> OrderDetail &#123;</span><br><span class="line">	product: Stock;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="default-exports">default exports</span></h3>
<p>带有<code>default</code> 语句的export不需要花括号，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">interface</span> &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">	unitPrice: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Product <span class="keyword">from</span> <span class="string">"./product"</span>;</span><br></pre></td></tr></table></figure>
<h2><span id="编译配置">编译配置</span></h2>
<p>TypeScript的编译器是<code>tsc</code>，它会将对应的<code>TS</code>文件编译为<code>JS</code>文件，</p>
<p>新建文件，<code>orderDetail.ts</code>，内容如下，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> Product &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">	unitPrice: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: <span class="built_in">number</span>;</span><br><span class="line">	getTotal(discount: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> priceWithoutDiscount = <span class="keyword">this</span>.product.unitPrice * <span class="keyword">this</span>.quantity;</span><br><span class="line">		<span class="keyword">const</span> discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		<span class="keyword">return</span> priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>打开终端，输入如下命令，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc orderDetail</span><br></pre></td></tr></table></figure>
<p>不出错的话，在对应目录会生成一个文件<code>orderDetail.js</code>，里面是转换的JavaScript内容，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line">exports.__esModule = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> OrderDetail = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">OrderDetail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	OrderDetail.prototype.getTotal = <span class="function"><span class="keyword">function</span> (<span class="params">discount</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> priceWithoutDiscount = <span class="keyword">this</span>.product.unitPrice * <span class="keyword">this</span>.quantity;</span><br><span class="line">		<span class="keyword">var</span> discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		<span class="keyword">return</span> priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">return</span> OrderDetail;</span><br><span class="line">&#125;());</span><br><span class="line">exports.OrderDetail = OrderDetail;</span><br></pre></td></tr></table></figure>
<h3><span id="常见编译选项">常见编译选项</span></h3>
<ul>
<li><code>--target</code>: 目标，默认是<code>ES3</code>，</li>
<li><code>--outDir</code>: 输出目录</li>
<li><code>--module</code>: 指定模块格式，<code>--target</code>是ES3或ES5时，默认是<code>CommonJS</code></li>
<li><code>--allowJS</code>: 告诉编译器处理JavaScript文件，应对那些TypeScript无法应对时候，需要JavaScript的情况。</li>
<li><code>--watch</code>: watch mode模式，修改文件后保存后立即编译输出。</li>
<li><code>--noImplicitAny</code>: 强制显式指定<code>any</code>类型。</li>
<li><code>--noImplicitReturns</code>: 强制显式返回。即对于不是<code>void</code>返回类型，所有case必须有返回值。</li>
<li><code>--sourceMap</code>: development模式中，生成<code>*.map</code>文件，以允许调试</li>
<li><code>--moduleResolution</code>: 告诉编译器如何处理模块，有两个选项<code>classic</code>或<code>node</code>，如果不指定，默认是<code>classic</code>，会要求使用第三方包，所以需要显式设置为<code>node</code>，编译器会查找<code>node_modules</code>模块。</li>
</ul>
<h3><span id="tsconfigjson">tsconfig.json</span></h3>
<p><code>tsconfig.json</code>文件是上面这些开关的几种配置文件，样例如下，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">	<span class="string">"target"</span>: <span class="string">"esnext"</span>,</span><br><span class="line">	<span class="string">"outDir"</span>: <span class="string">"dist"</span>,</span><br><span class="line">	<span class="string">"module"</span>: <span class="string">"es6"</span>,</span><br><span class="line">	<span class="string">"moduleResolution"</span>: <span class="string">"node"</span>,</span><br><span class="line">	<span class="string">"sourceMap"</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="string">"noImplicitReturns"</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="string">"noImplicitAny"</span>: <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="指定编译文件">指定编译文件</span></h3>
<p>在<code>tsconfig.json</code>中可以指定编译那些TypeScript文件，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"files"</span>: [<span class="string">"product.ts"</span>, <span class="string">"orderDetail.ts"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者指定目录，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"include"</span>: [<span class="string">"src/**/*"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="typescript-linting">TypeScript linting</span></h3>
<p>linting是一种检查规则，用于加强语法或优化编译，参考TSLint官网。</p>
<h3><span id="code-formatting">Code Formatting</span></h3>
<p>代码格式化有很多种，常见的是<code>prettier</code>，另外还有less、css等等。</p>
<h2><span id="本章回归">本章回归</span></h2>
<ol>
<li>TS的5中原生类型是那些？						// string, number, boolean, undefined, null</li>
<li>下面变量<code>flag</code>类型推断的类型是什么？			// boolean</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flag = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>接口和类型别名的区别是什么？					// type alias不能继承</li>
<li>下面代码有什么错误？如何处理？</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Product &#123;</span><br><span class="line">	<span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span>, <span class="keyword">public</span> unitPrice: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> table = <span class="keyword">new</span> Product();</span><br><span class="line">table.name = <span class="string">"Table"</span>;</span><br><span class="line">table.unitPrice = <span class="number">700</span>;</span><br></pre></td></tr></table></figure>
<p>// 要么编写IProduct接口，继承成员属性；要么在Product中写上成员name，unitPrice；要么带上setter/getter方法；</p>
<ol start="5">
<li>如果想要我们的TS支持IE11，编译选项<code>--target</code>应该带什么？</li>
<li>如何转换为ES6版本的<code>.js</code>文件？				// --target ES6</li>
<li>如何阻止代码中出现<code>console.log</code>语句？		// tslint.yml 带<code>no-console</code></li>
</ol>
</div></article><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2019/11/27/react-ts/chapter_1_TypeScript_Basics/';
var disqus_title = '第一章 基础';
var disqus_url = 'http://galudisu.info/2019/11/27/react-ts/chapter_1_TypeScript_Basics/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//barudisshu-github-io.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>©2016 - 2020 <a href="http://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready"><script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css"><script src="/js/base.js"></script><script src="/js/rabbit-lyrics.js"></script></div><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>